<!doctype html>
<html ng-app="citizenos" ng-controller="AppCtrl">
<head>
    <meta charset="UTF-8">
    <title>CitizenOS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <base href="/">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/nav.css">
    <link rel="stylesheet" href="styles/content.css">
    <link rel="stylesheet" href="styles/icons.css">
    <link rel="icon" href="imgs/favicon.ico">
    <script src="js/libs/angular.js"></script>
    <script src="js/libs/angular-route.js"></script>
    <script src="js/libs/angular-touch.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers/HomeCtrl.js"></script>
    <script src="js/controllers/AppCtrl.js"></script>
</head>
<script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
<body ng-class="$root.nav_open ? 'body_fixed' : 'body_not_fixed'" resize>


<div id="logo_area">
    <div id="logo" class="sprite sprite-x5-cos-logo-small2x">
    </div>
</div>

<!-- MOBILE HEADER NAV -->
<div id="mobile_header" ng-if="w_width <= 1024">

    <div class="header_button" ng-click="$root.nav_open = !$root.nav_open">

        <div id="line_holder">
            <div class="v_line light_line"></div>
            <div class="v_line dark_line"></div>
        </div>

        <div class="header_button_icon">
            <div class="sprite" ng-class="$root.nav_open ? 'sprite-icon-closemenu2x' : 'sprite-icon-hamburger2x'">
            </div>
        </div>
        <div class="header_button_text">
            Menu
        </div>
    </div>

    <div class="header_button" ng-click="$root.search_open = !$root.search_open; $root.search_area_open = true" ng-style="{'display': $root.search_open ? 'none ' : 'relative'}">
        <div class="header_button_icon">
            <div class="sprite sprite-icon-search2x">
            </div>
        </div>
        <div class="header_button_text">
            Search
        </div>
    </div>

    <div id="m_search_bar" ng-style="{'display': $root.search_open ? 'relative' : 'none'}">
        <div id="m_search_icon">
            <div class="table_cell">
                <div class="sprite sprite-icon-search-b-2x"></div>
            </div>
        </div>
        <div id="m_search_close" ng-click="$root.search_open = !$root.search_open; $root.search_area_open = false">
            <div class="table_cell">
                <div class="sprite sprite-icon-closemenu-b-2x"></div>
            </div>
        </div>
        <div id="m_search_bar_wrap">
            <input placeholder="Search">
        </div>
    </div>

</div>

<!-- NAV -->
<nav ng-class="$root.nav_open ? 'nav_is_open' : ''" ng-click="$root.search_area_open = false" ng-swipe-right="$root.nav_open = false">

    <div id="nav_inside">

        <div id="account_area">
            <div id="account_picture">
            </div>
            <div id="account_text">
                <div class="section_header bold_white">Kevin Krepin</div>
                <a id="account_action" href="#">My Account</a>
            </div>
        </div>

        <div class="line dark_line"></div>
        <div class="line light_line"></div>

        <!-- Nav section -->
        <div class="section">
            <div class="section_item section_header bold_white">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-menu-icon-topics2x"></div>
                    </div>
                </div>
                <div class="section_text">Topics</div>
            </div>
            <a class="section_item bold_blue">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-bullet-plus2x"></div>
                    </div>
                </div>
                <div class="section_text">Create topic</div>
            </a>
            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-bullet-arrow2x"></div>
                    </div>
                </div>
                <div class="section_text">My topics</div>
            </a>
            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-bullet-arrow2x"></div>
                    </div>
                </div>
                <div class="section_text">Public topics</div>
            </a>
        </div>

        <!-- Nav section -->
        <div class="section">
            <div class="section_item section_header bold_white">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-menu-icon-groups2x"></div>
                    </div>
                </div>
                <div class="section_text">Groups</div>
            </div>
            <a class="section_item bold_blue">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-bullet-plus2x"></div>
                    </div>
                </div>
                <div class="section_text">Create groups</div>
            </a>
            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-bullet-arrow2x"></div>
                    </div>
                </div>
                <div class="section_text">My groups</div>
            </a>
            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-bullet-arrow2x"></div>
                    </div>
                </div>
                <div class="section_text">Public groups</div>
            </a>
        </div>

        <div class="line dark_line"></div>
        <div class="line light_line"></div>


        <!-- Nav section -->
        <div class="section">

            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-menu-icon-connections2x"></div>
                    </div>
                </div>
                <div class="section_text">Connections</div>
            </a>

            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-menu-icon-about2x"></div>
                    </div>
                </div>
                <div class="section_text">About</div>
            </a>

            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-menu-icon-faq2x"></div>
                    </div>
                </div>
                <div class="section_text">FAQ</div>
            </a>

            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-menu-icon-help2x"></div>
                    </div>
                </div>
                <div class="section_text">Help</div>
            </a>

            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-x0-menu-icon-help2x"></div>
                    </div>
                </div>
                <div class="section_text">English</div>
            </a>
        </div>

        <div class="line dark_line"></div>
        <div class="line light_line"></div>


        <div class="section">

            <a class="section_item" href="#">
                <div class="section_icon">
                    <div class="table_cell">
                        <div class="sprite sprite-menu-icon-logout2x"></div>
                    </div>
                </div>
                <div class="section_text">Log out</div>
            </a>

        </div>

    </div>

</nav>


<!-- CONTENT -->

<div id="content" ng-class="$root.nav_open ? 'nav_open' : ''">

    <!-- SEARCH BAR-->

    <div id="search_bar" ng-if="w_width > 1024">
        <div id="search_icon">
            <div class="table_cell">
                <div class="sprite sprite-x3-icon-topbar-earch2x"></div>
            </div>
        </div>

        <div id="close_search_icon" ng-click="$root.search_area_open = false" ng-style="{'display': $root.search_area_open ? 'relative' : 'none'}">
             <div class="table_cell">
                 <div class="sprite sprite-icon-closemenu-b-2x"></div>
             </div>
        </div>

        <input placeholder="Search topics, users, groups…" ng-click="$root.search_area_open = true">
        
    </div>

    <!-- CONTENT WRAP -->

    <div id="table_wrap">


        <div id="close_mobile_menu" ng-if="$root.nav_open" ng-swipe-right="$root.nav_open = false" ng-click="$root.nav_open = false"   ng-style="{'background' : $root.nav_open ? 'rgba(0,0,0,.3)' : 'rgba(0,0,0,0)' }"></div>


        <div id="close_mobile_menu" ng-if="$root.nav_open" ng-swipe-right="$root.nav_open = false" ng-click="$root.nav_open = false"
             ng-style="{'background' : $root.nav_open ? 'rgba(0,0,0,.3)' : 'rgba(0,0,0,0)' }"></div>
             

        <div class="table">
            <div class="cell">

                <!-- SEARCH AREA (don't move to separate view') -->
                <div id="search_area"  ng-style="{'height' : $root.search_area_open ? '100%' : '0' }" ng-controller="search">
                   
                    <div id="search_area_wrap">
                        <div ng-repeat="result in results">
                            <div class="search_cat">
                                <div class="cat_wrap">
                                    Context search results in <b>{{result.groupName}}</b>
                                </div>
                            </div>
                            <div class="results_area">
                                <div class="result_group" ng-repeat="resultGroup in result.groupResults">

                                    <div class="no_results" ng-if="resultGroup.resultTitles.length == 0">
                                        <b class="search_msgb">Oops, we couldn’t find any results matching your search :(</b>
                                        <br>
                                        <div class="search_msg">
                                            Maybe you have a typo in your search?<br>
                                            We did find some things scattered throughout the CitizenOS platform, so feel free to check them out. We promise it will be worth your while!
                                        </div>
                                    </div>

                                    <div class="results_header">
                                        <div ng-if="w_width > 568 || key == 0" class="result_title" ng-repeat="(key, resultTitle) in resultGroup.resultTitles">
                                            {{resultTitle}}
                                        </div>
                                    </div>

                                    <div class="result_links" ng-repeat="(key, resultLinks) in resultGroup.resultLinks">

                                        <div ng-if="key < 4 || view_more" class="links_wrap" ng-repeat="(sub_key, linksWrap) in resultLinks.linksWrap">
                                            <!--<span ng-if="w_width > 568 ||sub_key == 0">-->
                                                <span ng-repeat="links in linksWrap.links">
                                                    <a ng-click="$root.search_area_open = false" href="{{links.linkHref}}" class="result_link">
                                                        {{links.linkName}}</a>{{$last ? '' : ', '}}
                                                </span>
                                            <!--</span>-->
                                        </div>

                                        <div ng-if="key == 4 && !view_more" class="more_results" ng-click="$parent.$parent.view_more = true">
                                            View more results
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div ng-click="$root.search_area_open = false" id="search_area_close">
                    </div>


                </div>

                <!-- ROUTES CONTENT -->
                <div ng-view></div>

            </div>
        </div>
    </div>
</div>

</body>
</html>
