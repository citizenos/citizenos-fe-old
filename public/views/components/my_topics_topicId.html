<!-- RIGHT SIDE -->
<div class="topics_right">

    <div class="v_line separator"></div>

    <!-- GENERAL INFO TOPIC VIEW -->
    <div class="info_container">

        <div class="container_header" ng-click="$ctrl.generalInfo.isVisible = !$ctrl.generalInfo.isVisible">
            <div class="header_text" translate="VIEWS.MY_TOPICS_TOPICID.HEADING_GENERAL_INFORMATION">General information</div>
            <div class="minimize_container">
                <div ng-class="!$ctrl.generalInfo.isVisible ? 'sprite-btn-expand2x' : 'sprite-btn-minimize2x'" class="sprite"></div>
            </div>
        </div>

        <div class="container_content" ng-if="$ctrl.generalInfo.isVisible">

            <div class="content_top">
                <div class="container_title" ui-sref="topics/view({topicId: $ctrl.topic.id})" ng-bind="$ctrl.topic.title">Topic title</div>
                <div class="container_visibility" >
                    <div ng-if="$ctrl.topic" class="ff_table_fix" tooltips tooltip-side="left" tooltip-template="<span>{{'TOOLTIP_TOPIC_VISIBILITY_'+$ctrl.topic.visibility | uppercase | translate}}</span>">
                        <div class="table_cell">
                            <div class="sprite" ng-class="{'sprite-icon-public-topic': !$ctrl.topic.isPrivate(), 'sprite-icon-private-topic': $ctrl.topic.isPrivate()}"></div>
                        </div>
                    </div>
                </div>
                <div class="container_pin" ng-class="$ctrl.topic.pinned ? 'pinned' : ''" ng-click="$ctrl.togglePin()">
                    <div class="ff_table_fix" tooltips tooltip-side="left" tooltip-template="<span'>{{'TOOLTIP_PIN_TOPIC' | translate}}</span>">
                        <div class="table_cell">
                            <div class="sprite sprite-icon-favourite2x-white"></div>
                            <div class="yellow_bg"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="line lightest_line"></div>

            <div class="content_bottom">


                <!-- COLUMN 1 -->
                <div class="content_column">

                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_AUTHOR">Author</div>
                        <div class="item_content">
                            <div class="item_text" ng-bind="$ctrl.topic.creator.name">Autor autor</div>
                        </div>
                        <div class="clearer"></div>
                    </div>

                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_DATE_CREATED">Date created</div>
                        <div class="item_content">
                            <div class="item_text" ng-bind="$ctrl.topic.createdAt | amDateFormat : 'L'">12/12/2017</div>
                        </div>
                        <div class="clearer"></div>
                    </div>

                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_YOUR_RIGHTS">Your rights</div>
                        <div class="item_content" ng-if="$ctrl.topic">
                            <div class="item_text">{{'TXT_TOPIC_LEVELS_' + $ctrl.topic.permission.level | uppercase | translate}}</div>
                        </div>
                        <div class="clearer"></div>
                    </div>

                </div>


                <!-- COLUMN 2 -->
                <div class="content_column">

                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_USERS">Users</div>
                        <div class="item_content">
                            <div class="item_text">
                                <span ng-bind="$ctrl.topic.members.users.count">0</span>
                                <span class="separator">|</span>
                                <span class="item_link blue_link" ng-click="$ctrl.viewMemberUsers();" translate="VIEWS.MY_TOPICS_TOPICID.LNK_VIEW">view</span>
                            </div>
                        </div>
                        <div class="clearer"></div>
                    </div>

                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_GROUPS">Groups</div>
                        <div class="item_content">
                            <div class="item_text">
                                <span ng-bind="$ctrl.topic.members.groups.count">0</span>
                                <span class="separator">|</span>
                                <span class="item_link blue_link" ng-click="$ctrl.viewMemberGroups();" translate="VIEWS.MY_TOPICS_TOPICID.LNK_VIEW">view</span>
                            </div>
                        </div>
                        <div class="clearer"></div>
                    </div>

                </div>


                <!-- COLUMN 3 -->
                <div class="content_column">

                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_STATUS">Status</div>
                        <div class="item_content" ng-if="$ctrl.topic">
                            <div class="item_text">{{'TXT_TOPIC_STATUS_' + $ctrl.topic.status | uppercase | translate}}</div>
                        </div>
                        <div class="clearer"></div>
                    </div>

                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_TOPIC_ACTIONS">Topic actions</div>
                        <div class="item_content">
                            <span class="item_text blue_link" ng-if="$ctrl.topic.canUpdate()" ui-sref="my/topics/topicId/settings({topicId: $ctrl.topic.id})" translate="VIEWS.MY_TOPICS_TOPICID.LNK_SETTINGS">settings</span>
                            <span class="separator" ng-if="$ctrl.topic.canUpdate()">|</span>
                            <span class="item_text blue_link" ng-click="$ctrl.goToTopicView ($ctrl.topic)" translate="VIEWS.MY_TOPICS_TOPICID.LNK_VIEW">view</span>
                            <span class="separator" ng-if="$ctrl.topic.canEditDescription()">|</span>
                            <span class="item_text blue_link" ng-if="$ctrl.topic.canEditDescription()" ui-sref="topics/view({topicId: $ctrl.topic.id, editMode: true})" translate="VIEWS.MY_TOPICS_TOPICID.LNK_EDIT">edit</span>
                            <span class="separator">|</span>
                            <span class="item_text blue_link" ng-click="$ctrl.doLeaveTopic()" translate="VIEWS.MY_TOPICS_TOPICID.LNK_LEAVE">leave</span>
                            <span ng-if="$ctrl.topic.canDelete()">
                                <span class="separator">|</span>
                                <span ng-click="$ctrl.doDeleteTopic()">
                                    <span class="sprite sprite-mytopics-icon-deletetopic2x"></span>
                                    <span class="item_text remove blue_link" translate="VIEWS.MY_TOPICS_TOPICID.LNK_DELETE">delete</span>
                                </span>
                            </span>
                        </div>
                        <div class="clearer"></div>
                    </div>

                </div>

                <div class="clearer"></div>

            </div>

        </div>


    </div>

    <!-- ACTIVITY FEED & NOTIFICATIONS -->
    <div id="activities_list" class="info_container">

        <div class="container_header" ng-click="doToggleActivities();">
            <div class="header_text">
                <span translate="VIEWS.MY_TOPICS_TOPICID.HEADING_ACTIVITY_FEED_AND_NOTIFICATIONS">Activity feed & notifications</span>
                <span>|</span>
                <a class="blue_link" translate="VIEWS.TOPICS_TOPICID.NAV_LNK_SET_TOPIC_NOTIFICATIONS" ng-click="$event.stopPropagation(); $ctrl.app.doShowTopicNotificationSettings($ctrl.topic.id)">Set topic notifications</a>
            </div>
            <div class="minimize_container">
                <div ng-class="!$ctrl.app.activityFeed ? 'sprite-btn-expand2x' : 'sprite-btn-minimize2x'" class="sprite"></div>
            </div>
        </div>

        <div class="container_content activity_container" ng-if="$ctrl.app.activityFeed" cos-scroll on-scroll="$ctrl.loadActivities">
            <div class="activity_wrap compact">
                <div class="activity_area">

                    <div ng-repeat="(key, group) in $ctrl.activities">
                        <div class="activity_content" ng-if="$first || group.show" ng-repeat="(keyRow, activity) in group.values" >
                            <div class="left_side">
                                <div class="line_top"></div>
                                <div class="icon">
                                    <div ng-class="'sprite sprite-icon-activity-{{activity.values.className}}{{activity.isNew}}-2x'"></div>
                                </div>
                                <div class="line_bottom"></div>
                            </div>
                            <div class="right_side" ng-if="keyCounter(group.values) > 1">
                                <div class="text_box" ng-if="$first" ng-click="group.show = !group.show">
                                    <div class="main_text">
                                        <span ng-bind-html="translateGroup(group.referer, group.values)">User Tom has added a new argument for topic: HELP.</span>
                                    </div>
                                    <div class="separator"></div>
                                    <div class="arrow_holder">
                                        <div class="table_cell">
                                            <div class="sprite sprite-icon-dropdown-arrowdown2x"></div>

                                            <div class="v_line"></div>
                                        </div>
                                    </div>
                                    <b class="notch border-notch"></b>
                                    <b class="notch"></b>
                                </div>
                                <div class="text_box no_margin" ng-if="$first && group.show">
                                    <div class="activity_group_row" ng-repeat="item in group.values" ng-click="$ctrl.activityRedirect(item)">
                                        <div class="contents">
                                            <div class="contents_image">
                                                <div class="profile_image_wrapper dark">
                                                    <!--div class="profile_moon sprite sprite-icon-certified-fb2x"></div-->
                                                    <div class="account_picture">
                                                        <div class="profile_image_filler">
                                                            <cos-initials class="table_cell" ng-model="item.values.userName"></cos-initials>
                                                            <div class="profile_circle"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="contents_data">
                                                <span translate="{{item.string}}" translate-values="item.values">User Tom has added a new argument for topic: HELP.</span>
                                                <i ng-if="showActivityUpdateVersions(item)">
                                                    <em>{{::item.values.fieldName}}</em>
                                                    <div class="activity_previous" translate="ACTIVITY_FEED.ACTIVITY_PREVIOUS_VERSION" translate-values="{previousValue: '{{(item.values.previousValue | limitTo: 200) + (item.values.previousValue.length > 200 ? '...' : '')}}'}"></div>

                                                    <div class="activity_new" translate="ACTIVITY_FEED.ACTIVITY_NEW_VERSION" translate-values="{newValue: '{{(item.values.newValue | limitTo: 200) + (item.values.newValue.length > 200 ? '...' : '')}}'}"></div>
                                                </i>
                                                <div class="date_area" ng-bind="item.updatedAt | amDateFormat : 'L LT'">55.07.2056 11:23</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="right_side" ng-if="keyCounter(group.values) === 1" ng-click="activityRedirect(activity)">
                                <div class="text_box">
                                    <div class="main_text">
                                        <span translate="{{activity.string}}" translate-values="activity.values">User Tom has added a new argument for topic: HELP.</span>
                                    </div>
                                    <div class="description_area italic">
                                        <span ng-if="showActivityUpdateVersions(activity)">
                                            <span class="activity_previous" translate="ACTIVITY_FEED.ACTIVITY_PREVIOUS_VERSION" translate-values="{previousValue: '{{(activity.values.previousValue | limitTo: 200) + (activity.values.previousValue.length > 200 ? '...' : '')}}'}"></span>
                                            <br>
                                            <span class="activity_new" translate="ACTIVITY_FEED.ACTIVITY_NEW_VERSION" translate-values="{newValue: '{{(activity.values.newValue | limitTo: 200) + (activity.values.newValue.length > 200 ? '...' : '')}}'}"></span>
                                        </span>
                                        <span ng-if="showActivityDescription(activity) && !showActivityUpdateVersions(activity)" class="activity_description_text" ng-bind="(activity.values.description | limitTo: 200) + (activity.values.description.length > 200 ? '...' : '')">If you are in the market for a computer, there are a number of factors to consider. Will it be used for your home, your office or perhaps even your
                                            home office combo? First off, you will need to set a budget for your new ...
                                        </span>
                                    </div>
                                    <div class="date_area" ng-bind="activity.updatedAt | amDateFormat : 'L LT'">55.07.2056 11:23</div>
                                    <b class="notch border-notch"></b>
                                    <b class="notch"></b>
                                </div>
                            </div>
                            <div class="clearer" ng-if="$first"></div>
                            </div>
                        </div>
                </div>
            </div>
        </div>

    </div>

    <!-- CURRENT VOTE WITH VOTING -->

    <div id="vote_results" class="info_container vote_results" ng-if="$ctrl.topic.vote.id" >

        <div class="container_header" ng-click="doToggleVoteResults()">
            <div class="header_text" translate="VIEWS.MY_TOPICS_TOPICID.HEADING_CURRENT_VOTE_RESULTS">Current vote results</div>
            <div class="minimize_container">
                <div ng-class="!$ctrl.voteResults.isVisible ? 'sprite-btn-expand2x' : 'sprite-btn-minimize2x'" class="sprite"></div>
            </div>
        </div>

        <div class="container_content" ng-if="voteResults.isVisible">


            <div class="content_bottom">

                <!-- COLUMN 1 -->
                <div class="content_column" ng-controller="TopicVoteCtrl">
                    <div class="content_item" ng-if="$ctrl.topic.status === $ctrl.STATUSES.voting && !($ctrl.topic.hasVoteEndedExpired() || $ctrl.topic.hasVoteEnded())">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.VOTE_CAST_YOUR_VOTE">
                            Cast your vote
                        </div>
                        <div class="voting_buttons">
                            <div class="line lightest_line"></div>

                            <div class="voting_platform_buttons"  ng-if="!topic.hasVoteEnded()">

                                <div class="voting_button" ng-if="$ctrl.topic.canVote()" ng-class="(option.selected) ? 'active' : ''" ng-repeat="(key, option) in $ctrl.topic.vote.options.rows" ng-click="selectOption(option)">
                                    <div class="table_cell left_side">
                                        <label class="checkcontainer" ng-if="!isRadio ($ctrl.topic.vote, option)">
                                            <input type="checkbox" class="vote_option_radio" checked="(option.selected) ? 'checked: ''" ng-click="selectOption(option)">
                                            <span class="option_checkbox"></span>
                                        </label>
                                        <label class="checkcontainer" ng-if="isRadio ($ctrl.topic.vote, option)">
                                            <input type="radio" class="vote_option_radio" ng-click="selectOption(option)">
                                            <span class="option_radio"></span>
                                        </label>

                                    </div>
                                    <div class="table_cell right_side" translate="{{'VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + option.value | linky | uppercase}}"
                                         translate-default="{{option.value | linky}}">
                                    </div>
                                </div>

                            </div>

                            <div class="delegation_section" ng-if="!$ctrl.topic.hasVoteEnded()">

                                <div class="voting_button" ng-if="($ctrl.topic.canDelegate() && $ctrl.topic.vote.authType !== $ctrl.voteAuthTypes.hard)" ng-class="$ctrl.topic.vote.delegation ? 'active' : ''" ng-click="$ctrl.doDelegate()">
                                    <div class="table_cell left_side">
                                        <div class="sprite sprite-icon-delegate2x"></div>
                                    </div>
                                    <div class="table_cell right_side" translate="VIEWS.MY_TOPICS_TOPICID.VOTE_HEADING_DELEGATE">Delegate your vote</div>
                                </div>

                                <div class="delegation_information" ng-if="$ctrl.topic.vote.delegation">
                                    <div class="delegation_title" translate="VIEWS.MY_TOPICS_TOPICID.VOTE_DELEGATED_TO">You delegated your vote to</div>
                                    <div class="delegations">

                                        <div class="table_cell">
                                            <div class="profile_image_wrapper dark">
                                                <!--div class="profile_moon sprite sprite-icon-certified-fb2x"></div-->
                                                <div class="account_picture">
                                                    <img ng-if="$ctrl.topic.vote.delegation.imageUrl" ng-src="{{topic.vote.delegation.imageUrl}}">
                                                    <div ng-if="!topic.vote.delegation.imageUrl" class="profile_image_filler">
                                                        <cos-initials class="table_cell" ng-model="$ctrl.topic.vote.delegation.name" initial-limit="1"></cos-initials>
                                                        <div class="profile_circle"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="name_wrap">
                                                <div class="table_cell">
                                                    <div class="blue_link bold">{{topic.vote.delegation.name}}</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="table_cell">
                                            <div class="blue_button" ng-click="doRevokeDelegation()" translate="VIEWS.MY_TOPICS_TOPICID.VOTE_REVOKE_DELEGATION">Revoke your delegation</div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="line lightest_line multiplechoice"></div>
                            <div class="vote_multiple_submit_section">
                                <div class="table_cell" cos-disabled="!canSubmit()">
                                    <div class="blue_button" ng-click="doVote()" translate="VIEWS.TOPICS_TOPICID.VOTE_SUBMIT">Submit your vote</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content_item" ng-if="$ctrl.topic.hasVoteEndedExpired() || $ctrl.topic.hasVoteEnded()">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_RESULTS">Results</div>

                        <div class="results_table">

                            <div class="item_content" ng-repeat="voteOption in $ctrl.topic.vote.options.rows | orderBy: 'voteCount'">
                                <div class="item_text" translate="{{'VIEWS.TOPICS_TOPICID.VOTE_LBL_OPTION_' + voteOption.value | linky | uppercase}}" translate-default="{{voteOption.value | linky}}">voteOption.value</div>
                                <div class="item_text">{{voteOption.voteCount || 0}}</div>
                            </div>

                        </div>

                    </div>

                </div>


                <!-- COLUMN 2 -->
                <div class="content_column">


                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_VOTES_COUNTED">Votes counted</div>
                        <div class="item_content">
                            <div class="item_text">
                                {{topic.vote.getVoteCountTotal()}}
                                <!--<span class="separator">|</span>
                                <span class="item_link blue_link">
                                    view who voted TODO!
                                </span-->
                            </div>
                        </div>
                        <div class="clearer"></div>
                    </div>

                    <div class="content_item">
                        <div class="item_description" translate="VIEWS.MY_TOPICS_TOPICID.LBL_VOTE_DEADLINE">Vote deadline</div>
                        <div class="item_content">
                            <div class="item_text">
                                <span ng-bind=" ($ctrl.topic.vote.endsAt | amDateFormat : 'L LT Z') || ('VIEWS.MY_TOPICS_TOPICID.LBL_VOTE_DEADLINE_NONE' | translate)">12/12/2017</span>
                                <span class="separator">|</span>
                                <cos-modal-datepicker ng-model="$ctrl.topic.vote.endsAt" cos-modal-title="'VIEWS.MY_TOPICS_TOPICID.LBL_VOTE_DEADLINE' | translate" cos-modal-description="$ctrl.topic.title" cos-modal-on-save="doSaveVoteEndsAt"></cos-modal-datepicker>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="clearer"></div>

            </div>

        </div>


    </div>

    <!-- GROUP LIST -->
    <div class="info_container group_list" id="group_list">
        <div class="container_header" ng-click="$ctrl.doToggleMemberGroupList();">
            <div class="header_text"><span translate="VIEWS.MY_TOPICS_TOPICID.HEADING_GROUP_LIST">Group list</span> <span ng-bind="'('+$ctrl.topic.members.groups.count+')'">0</span> |
                <div class="blue_link" ng-if="$ctrl.topic.members.groups.count" ng-click="$ctrl.groupList.isSearchVisible = !$ctrl.groupList.isSearchVisible; doShowMemberGroupList(); $event.stopPropagation()" translate="VIEWS.MY_TOPICS_TOPICID.LNK_FILTER">filter</div>
                <span ng-if="$ctrl.topic.members.groups.count && $ctrl.topic.canUpdate()">|</span>
                <div class="blue_link" ng-if="$ctrl.topic.canUpdate()" ui-sref="my/topics/topicId/invite({topicId: $ctrl.topic.id, tab: 'invite'})" ng-click="$event.stopPropagation()" translate="VIEWS.MY_TOPICS_TOPICID.LNK_ADD">add</div>
            </div>
            <div class="minimize_container" ng-if="$ctrl.topic.members.groups.count">
                <div ng-class="!$ctrl.groupList.isVisible ? 'sprite-btn-expand2x' : 'sprite-btn-minimize2x'" class="sprite"></div>
            </div>
        </div>
        <div class="container_header second_header" ng-if="$ctrl.groupList.isSearchVisible">
            <div class="table_cell">
                <input placeholder="{{'VIEWS.MY_TOPICS_TOPICID.PLACEHOLDER_TOPIC_TITLE_PERMISSION' | translate}}" ng-change="$ctrl.loadTopicMemberGroupList()" ng-model-options="{debounce:250}" ng-model="$ctrl.groupList.searchFilter">
            </div>
            <div class="table_cell">
                <div class="blue_link" ng-click="$ctrl.groupList.searchFilter = ''" translate="VIEWS.MY_TOPICS_TOPICID.LNK_CLEAR_FILTER">clear filter</div>
            </div>
        </div>
        <div class="container_content" ng-if="$ctrl.groupList.isVisible">
            <div class="pretend_table">
                <div class="pretend_tr">
                    <div class="mobile_text pretend_th" ng-if="$ctrl.app.wWidth <= 560">
                        <div class="th_text" translate="VIEWS.MY_TOPICS_TOPICID.LBL_ORDER_BY">Order by:</div>
                    </div>
                    <div class="pretend_th" ng-click="$ctrl.sortMemberGroups('name')">
                        <div class="th_text">
                            <span translate="VIEWS.MY_TOPICS_TOPICID.LNK_NAME">Name</span>
                            <div ng-class="{'sprite sprite-icon-list-ordering2x': $ctrl.groupList.searchOrderBy.sortOrder === 'ASC', 'sprite sprite-icon-list-ordering-down-black2x': $ctrl.groupList.searchOrderBy.sortOrder === 'DESC' }" ng-if="$ctrl.groupList.searchOrderBy.property === 'name'"></div>
                        </div>
                    </div>
                    <div class="pretend_th" ng-click="$ctrl.sortMemberGroups('level')">
                        <div class="th_text">
                            <span translate="VIEWS.MY_TOPICS_TOPICID.LNK_ROLES">Roles</span>
                            <div ng-class="{'sprite sprite-icon-list-ordering2x': $ctrl.groupList.searchOrderBy.sortOrder === 'ASC', 'sprite sprite-icon-list-ordering-down-black2x': $ctrl.groupList.searchOrderBy.sortOrder === 'DESC' }" ng-if="$ctrl.groupList.searchOrderBy.property === 'level'"></div>

                        </div>
                    </div>
                    <div class="pretend_th" ng-click="$ctrl.sortMemberGroups('members.users.count')">
                        <div class="th_text">
                            <span translate="VIEWS.MY_TOPICS_TOPICID.LNK_USERS">Users</span>
                            <div ng-class="{'sprite sprite-icon-list-ordering2x': $ctrl.groupList.searchOrderBy.sortOrder === 'ASC', 'sprite sprite-icon-list-ordering-down-black2x': $ctrl.groupList.searchOrderBy.sortOrder === 'DESC' }" ng-if="$ctrl.groupList.searchOrderBy.property === 'members.users.count'"></div>
                        </div>
                    </div>
                    <div class="pretend_th not_sortable">
                        <div class="th_text">
                            <span translate="VIEWS.MY_TOPICS_TOPICID.LBL_REMOVE_FROM_TOPIC">Remove from topic</span>
                        </div>
                    </div>
                </div>
                <div class="pretend_tr" ng-repeat="group in $ctrl.topic.members.groups.rows">
                    <div class="pretend_td">
                        <div class="blue_link" ng-if="group.permission.level" ui-sref="my/groups/groupId({groupId: group.id, filter: 'grouped'})" ui-sref-opts="{reload: true}" ng-bind="group.name">Group name</div>
                        <div ng-if="!group.permission.level"><i class="disabled" translate="VIEWS.MY_TOPICS_TOPICID.LBL_INACCESSIBLE_GROUP">Inaccessible Group</i></div>
                    </div>
                    <div class="pretend_td">
                        <div cos-dropdown class="classic_dropdown" ng-if="$ctrl.topic.canUpdate()">
                            <div class="dropdown_selection">
                                <div class="dropdown_text">{{'TXT_TOPIC_LEVELS_' + group.level | uppercase | translate}}</div>

                                <div class="arrow_holder">
                                    <div class="table_cell">
                                        <div class="sprite sprite-icon-dropdown-arrowdown2x"></div>

                                        <div class="v_line"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="dropdown">
                                <div class="dropdown_item" ng-repeat="(key, level) in $ctrl.TopicMemberGroup.LEVELS">
                                    <div class="item_name" ng-click="$ctrl.doUpdateMemberGroup(group, level)">{{'TXT_TOPIC_LEVELS_' + level | uppercase | translate}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pretend_td">
                        <span class="pretend_table_mobile_text" translate="VIEWS.MY_TOPICS_TOPICID.LBL_USERS_COUNT" translate-values="{count: group.members.users.count}">Users: 0</span>
                        <span ng-if="wWidth >= 560" ng-bind="group.members.users.count">1</span>
                    </div>
                    <div class="pretend_td recycle_bin_wrap">
                        <div class="btn_wrap recycle_bin" ng-if="$ctrl.topic.canUpdate()">
                            <div class="btn" ng-click="doDeleteMemberGroup(group)">
                                <div class="table_cell">
                                    <div class="sprite desktop_fix sprite-mytopics-icon-deletetopic2x"></div>
                                    <div class="sprite mobile_fix sprite-mytopics-icon-deletetopic2x"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pretend_tr">
                    <div class="pagination_wrapper">
                        <div class="pagination" cos-pagination select="$ctrl.loadMemberGroupPage" total-pages="$ctrl.topic.members.groups.totalPages" page="$ctrl.topic.members.groups.page"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- USER LIST -->
    <div class="info_container group_list user_list" id="user_list">
        <div class="container_header" ng-click="$ctrl.doToggleMemberUserList(); $event.stopPropagation();">
            <div class="header_text">
                <span translate="VIEWS.MY_TOPICS_TOPICID.HEADING_USERS_LIST">User list</span> <span ng-bind="'(' + $ctrl.topic.members.users.count + ')'">(0)</span> |
                <div class="blue_link" ng-click="$ctrl.userList.isSearchVisible = !$ctrl.userList.isSearchVisible; $ctrl.doShowMemberUserList(); $event.stopPropagation();" translate="VIEWS.MY_TOPICS_TOPICID.LNK_FILTER">filter</div>
                <span ng-if="$ctrl.topic.canUpdate()">|</span>
                <div class="blue_link" ng-if="$ctrl.topic.canUpdate()" translate="VIEWS.MY_TOPICS_TOPICID.LNK_INVITE" ui-sref="my/topics/topicId/invite({topicId: $ctrl.topic.id, tab: 'invite'})" ng-click="$event.stopPropagation()">invite</div>
            </div>
            <div class="minimize_container">
                <div ng-class="!$ctrl.userList.isVisible ? 'sprite-btn-expand2x' : 'sprite-btn-minimize2x'" class="sprite"></div>
            </div>
        </div>
        <div class="container_header second_header" ng-if="$ctrl.userList.isSearchVisible">
            <div class="table_cell">
                <input placeholder="{{'VIEWS.MY_TOPICS_TOPICID.PLACEHOLDER_NAME_PERMISSION' | translate}}" ng-change="$ctrl.loadTopicMemberUserList(); $ctrl.loadTopicInviteUserList();" ng-model-options="{debounce:250}" ng-model="$ctrl.userList.searchFilter">
            </div>
            <div class="table_cell">
                <div class="blue_link" ng-click="$ctrl.userList.searchFilter = ''" translate="VIEWS.MY_TOPICS_TOPICID.LNK_CLEAR_FILTER">clear filter</div>
            </div>
        </div>
        <div class="container_content" ng-if="$ctrl.userList.isVisible">
            <div class="pretend_table">
                <div class="pretend_tr">
                    <div class="mobile_text pretend_th" ng-if="$ctrl.app.wWidth <= 560">
                        <div class="th_text" translate="VIEWS.MY_TOPICS_TOPICID.LBL_ORDER_BY">Order by:</div>
                    </div>
                    <div class="pretend_th" ng-click="$ctrl.sortMemberUsers('name');">
                        <div class="th_text">
                            <span translate="VIEWS.MY_TOPICS_TOPICID.LNK_PROFILE">Profile</span>
                            <div ng-class="{'sprite sprite-icon-list-ordering2x': $ctrl.userList.searchOrderBy.sortOrder === 'ASC', 'sprite sprite-icon-list-ordering-down-black2x': $ctrl.userList.searchOrderBy.sortOrder === 'DESC' }" ng-if="$ctrl.userList.searchOrderBy.property === 'name'"></div>
                        </div>
                    </div>
                    <div class="pretend_th" ng-click="$ctrl.sortMemberUsers('level')">
                        <div class="th_text">
                            <span translate="VIEWS.MY_TOPICS_TOPICID.LNK_ROLES">Roles</span>
                            <div ng-class="{'sprite sprite-icon-list-ordering2x': $ctrl.userList.searchOrderBy.sortOrder === 'ASC', 'sprite sprite-icon-list-ordering-down-black2x': $ctrl.userList.searchOrderBy.sortOrder === 'DESC' }" ng-if="$ctrl.userList.searchOrderBy.property === 'level'"></div>
                        </div>
                    </div>
                    <div class="pretend_th not_sortable" ng-if="$ctrl.topic.canUpdate()">
                        <div class="th_text">
                            <span translate="VIEWS.MY_TOPICS_TOPICID.LBL_REMOVE_FROM_TOPIC">Remove from topic</span>
                        </div>
                    </div>
                </div>
                <!-- TopicMemberUsers -->
                <my-member-user class="pretend_tr" ng-repeat="user in $ctrl.topic.members.users.rows | filter: $ctrl.userList.searchFilter | orderBy : $ctrl.userList.searchOrderBy.property" member="user" topic="$ctrl.topic"></my-member-user>

                <div class="pretend_tr">
                    <div class="pagination_wrapper">
                        <div class="pagination" cos-pagination select="$ctrl.loadMemberUsersPage" total-pages="$ctrl.topic.members.users.totalPages" page="$ctrl.topic.members.users.page"></div>
                    </div>
                </div>
                <!-- TopicInviteUsers -->
                <div class="pretend_tr" ng-repeat="invite in $ctrl.topic.invites.users.rows">
                    <div class="pretend_td">
                        <div class="profile_image_wrapper dark">
                            <!--div class="profile_moon sprite sprite-icon-certified-fb2x"></div-->
                            <div class="account_picture">
                                <img ng-if="invite.user.imageUrl" ng-src="{{invite.user.imageUrl}}">
                                <div ng-if="!invite.user.imageUrl" class="profile_image_filler">
                                    <cos-initials class="table_cell" ng-model="invite.user.name"></cos-initials>
                                    <div class="profile_circle"></div>
                                </div>
                            </div>
                        </div>
                        <div class="name_wrap">
                            <div class="table_cell smooth_gray">
                                <div ng-bind="invite.user.name">John Smith</div>
                                <div class="via">
                                    <span ng-if="invite.user.email || invite.user.phoneNumber">
                                        {{invite.user.email}} {{invite.user.phoneNumber}}
                                    </span>
                                    <span>
                                        <span ng-if="invite.user.email || invite.user.phoneNumber"> • </span>
                                        <span translate="VIEWS.MY_TOPICS_TOPICID.TXT_INVITE_PENDING">Pending invite</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pretend_td">
                        <span class="user_level_text">{{'TXT_TOPIC_LEVELS_' + invite.level | uppercase | translate}}</span>
                        <!--div cos-dropdown class="classic_dropdown" cos-disabled>
                            <div class="dropdown_selection">
                                <div class="dropdown_text">{{'TXT_TOPIC_LEVELS_' + invite.level | uppercase | translate}}</div>

                                <div class="arrow_holder">
                                    <div class="table_cell">
                                        <div class="sprite sprite-icon-dropdown-arrowdown2x"></div>

                                        <div class="v_line"></div>
                                    </div>
                                </div>
                            </div>
                        </div-->
                    </div>
                    <div class="pretend_td recycle_bin_wrap">
                        <div class="btn_wrap recycle_bin" ng-if="$ctrl.topic.canUpdate()">
                            <div class="btn" ng-click="$ctrl.doDeleteInviteUser(invite)">
                                <div class="table_cell">
                                    <div class="sprite desktop_fix sprite-mytopics-icon-deletetopic2x"></div>
                                    <div class="sprite mobile_fix sprite-mytopics-icon-deletetopic2x"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pretend_tr">
                    <div class="pagination_wrapper">
                        <div class="pagination" cos-pagination select="$ctrl.loadUsersInvitedPage" total-pages="$ctrl.topic.invites.users.totalPages" page="$ctrl.topic.invites.users.page"></div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div ui-view></div>

</div>
